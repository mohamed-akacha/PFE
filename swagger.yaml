openapi: 3.0.0
paths:
    /: {get: {operationId: getHello, parameters: [], responses: {'200': {description: ""}}}}
    /auth/register: {post: {operationId: createUser, parameters: [], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/UserSubscribeDto'}}}}, responses: {'201': {description: ""}}, tags: [Users/auth]}}
    '/auth/{id}': {put: {operationId: updateUser, parameters: [{name: id, required: true, in: path, schema: {type: number}}], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/UpdateUserDto'}}}}, responses: {'200': {description: ""}}, tags: [Users/auth]}, delete: {operationId: softDeleteUser, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [Users/auth]}}
    '/auth/confirm/{hashed}': {get: {operationId: getConfirm, parameters: [{name: hashed, required: true, in: path, schema: {type: string}}], responses: {'200': {description: ""}}, tags: [Users/auth]}}
    /auth/login: {post: {operationId: login, parameters: [], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/LoginCredentialsDto'}}}}, responses: {'201': {description: ""}}, tags: [Users/auth]}}
    /auth/all: {get: {operationId: findAll, parameters: [], responses: {'200': {description: ""}}, tags: [Users/auth]}}
    '/auth/restore/{id}': {patch: {operationId: restoreUser, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [Users/auth]}}
    '/auth/force/{id}': {delete: {operationId: deleteUser, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [Users/auth]}}
    /inspections: {post: {operationId: createInspection, parameters: [], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/AddInspectionDto'}}}}, responses: {'201': {description: ""}}, tags: [Inspections]}, get: {operationId: getAllInspections, parameters: [], responses: {'200': {description: ""}}, tags: [Inspections]}}
    '/inspections/{id}': {get: {operationId: getInspectionById, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [Inspections]}, put: {operationId: updateInspectionByAdmin, parameters: [{name: id, required: true, in: path, schema: {type: number}}], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/UpdateInspectionDto'}}}}, responses: {'200': {description: ""}}, tags: [Inspections]}, delete: {operationId: softDeleteInspection, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [Inspections]}}
    '/inspections/evaluate/{id}': {patch: {operationId: evaluateInspection, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [Inspections]}}
    '/inspections/restore/{id}': {put: {operationId: restoreInspection, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [Inspections]}}
    '/inspections/force/{id}': {delete: {operationId: deleteInspection, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [Inspections]}}
    /inspection-units: {post: {operationId: createInspectionUnit, parameters: [], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/CreateInspectionUnitDto'}}}}, responses: {'201': {description: ""}}, tags: [inspection-unit]}, get: {operationId: getAllInspectionUnits, parameters: [], responses: {'200': {description: ""}}, tags: [inspection-unit]}}
    '/inspection-units/{id}': {get: {operationId: getInspectionUnitById, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [inspection-unit]}, patch: {operationId: updateInspectionUnit, parameters: [{name: id, required: true, in: path, schema: {type: number}}], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/UpdateInspectionUnitDto'}}}}, responses: {'200': {description: ""}}, tags: [inspection-unit]}, delete: {operationId: softDeleteInspectionUnit, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [inspection-unit]}}
    '/inspection-units/restore/{id}': {patch: {operationId: restoreInspectionUnit, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [inspection-unit]}}
    /evaluation-points: {post: {operationId: createEvaluationPoint, parameters: [], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/AddEvaluationPointDto'}}}}, responses: {'201': {description: ""}}, tags: ['Points d''evaluation']}, get: {operationId: getAllEvaluationPoints, parameters: [], responses: {'200': {description: ""}}, tags: ['Points d''evaluation']}}
    '/evaluation-points/{id}': {get: {operationId: getEvaluationPointById, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: ['Points d''evaluation']}, put: {operationId: updateEvaluationPoint, parameters: [{name: id, required: true, in: path, schema: {type: number}}], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/UpdateEvaluationPointDto'}}}}, responses: {'200': {description: ""}}, tags: ['Points d''evaluation']}, delete: {operationId: softDeleteEvaluationPoint, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: ['Points d''evaluation']}}
    '/evaluation-points/restore/{id}': {put: {operationId: restoreEvaluationPoint, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: ['Points d''evaluation']}}
    '/evaluation-points/force/{id}': {delete: {operationId: deleteEvaluationPoint, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: ['Points d''evaluation']}}
    '/evaluations/{inspectionId}': {get: {operationId: getEvaluationData, parameters: [{name: inspectionId, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [Evaluations]}, post: {operationId: saveEvaluation, parameters: [{name: inspectionId, required: true, in: path, schema: {type: number}}], requestBody: {required: true, content: {application/json: {schema: {type: array, items: {type: string}}}}}, responses: {'201': {description: ""}}, tags: [Evaluations]}}
    /blocs: {post: {operationId: createBloc, parameters: [], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/CreateBlocDto'}}}}, responses: {'201': {description: ""}}, tags: [block]}, get: {operationId: getAllBlocs, parameters: [], responses: {'200': {description: ""}}, tags: [block]}}
    '/blocs/{id}': {get: {operationId: getOneById, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [block]}, patch: {operationId: updateBloc, parameters: [{name: id, required: true, in: path, schema: {type: number}}], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/UpdateBlocDto'}}}}, responses: {'200': {description: ""}}, tags: [block]}, delete: {operationId: softDeleteBloc, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [block]}}
    '/blocs/units/{unitId}': {get: {operationId: getBlocksByUnit, parameters: [{name: unitId, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [block]}}
    '/blocs/restore/{id}': {patch: {operationId: restoreBloc, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [block]}}
    '/blocs/force/{id}': {delete: {operationId: deleteBloc, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [block]}}
    /institutions: {post: {operationId: createInstitution, parameters: [], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/CreateInstitutionDto'}}}}, responses: {'201': {description: ""}}, tags: [institutions]}, get: {operationId: getAllInstitutions, parameters: [], responses: {'200': {description: ""}}, tags: [institutions]}}
    '/institutions/{id}': {get: {operationId: getInstitutionById, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [institutions]}, patch: {operationId: updateInstitution, parameters: [{name: id, required: true, in: path, schema: {type: number}}], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/UpdateInstitutionDto'}}}}, responses: {'200': {description: ""}}, tags: [institutions]}, delete: {operationId: softDeleteInstitution, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [institutions]}}
    '/institutions/restore/{id}': {patch: {operationId: restoreInstitution, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [institutions]}}
    '/institutions/force/{id}': {delete: {operationId: deleteInstitution, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [institutions]}}
    /zones: {post: {operationId: createZone, parameters: [], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/CreateZoneDto'}}}}, responses: {'201': {description: ""}}, tags: [zones]}, get: {operationId: getAllZones, parameters: [], responses: {'200': {description: ""}}, tags: [zones]}}
    '/zones/{id}': {get: {operationId: getZoneById, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [zones]}, patch: {operationId: updateZone, parameters: [{name: id, required: true, in: path, schema: {type: number}}], requestBody: {required: true, content: {application/json: {schema: {$ref: '#/components/schemas/UpdateZoneDto'}}}}, responses: {'200': {description: ""}}, tags: [zones]}, delete: {operationId: softDeleteZone, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [zones]}}
    '/zones/restore/{id}': {patch: {operationId: restoreZone, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [zones]}}
    '/zones/force/{id}': {delete: {operationId: deleteZone, parameters: [{name: id, required: true, in: path, schema: {type: number}}], responses: {'200': {description: ""}}, tags: [zones]}}
info:
    title: Inspections
    description: 'The inspection API description'
    version: '1.0'
    contact: {}
tags:
    - {name: inspections, description: ""}
servers: []
components:
    schemas: {UserSubscribeDto: {type: object, properties: {username: {type: string, description: 'The username of the user', minLength: 4, maxLength: 20, example: john_doe}, email: {type: string, description: 'The email address of the user', format: email, example: john.doe@example.com}, tel: {type: string, description: 'The telephone number of the user', minLength: 10, maxLength: 20, example: +1-541-754-3010}, role: {type: string, description: 'The role of the user', enum: [admin, user], example: admin}, password: {type: string, description: 'The password of the user', minLength: 8, maxLength: 20, example: Abcd1234!}}}, UpdateUserDto: {type: object, properties: {username: {type: string, description: 'The updated username of the user', minLength: 4, maxLength: 20, example: john_doe}, email: {type: string, description: 'The updated email address of the user', format: email, example: john.doe@example.com}, password: {type: string, description: 'The updated password of the user', minLength: 8, maxLength: 20, example: Abcd1234!}, oldpassword: {type: string, description: 'The updated password of the user', minLength: 8, maxLength: 20, example: Abcd1234!}, tel: {type: string, description: 'The updated telephone number of the user', minLength: 10, maxLength: 20, example: +1-541-754-3010}, role: {type: string, description: 'The role of the user', enum: [admin, user], example: admin}}}, LoginCredentialsDto: {type: object, properties: {}}, AddInspectionDto: {type: object, properties: {description: {type: string, description: 'La description de l''inspection', example: 'Vérification de l''état de la chaudière'}, datePrevue: {format: date-time, type: string, description: 'La date prévue de l''inspection', example: '2023-04-01'}, type: {type: string, description: 'Le type d''inspection', enum: [interne, externe]}, inspecteurId: {type: number, description: 'L''identifiant de l''inspecteur en charge de l''inspection', example: 1}, unitId: {type: number, description: 'L''identifiant de l''unité à inspecter', example: 2}}, required: [description, datePrevue, type]}, UpdateInspectionDto: {type: object, properties: {description: {type: string, description: 'Description de l''inspection', example: 'Inspection de sécurité mensuelle'}, datePrevue: {format: date-time, type: string, description: 'Date prévue de l''inspection', example: '2023-04-01'}, type: {type: string, description: 'Type d''inspection', enum: [interne, externe], example: externe}, inspecteurId: {type: number, description: 'Identifiant de l''inspecteur en charge de l''inspection', example: 1}, unitId: {type: number, description: 'Identifiant de l''unité inspectée', example: 2}}}, CreateInspectionUnitDto: {type: object, properties: {nom: {type: string, example: 'Nom de l''unité d''inspection', description: 'Le nom de l''unité d''inspection'}, code: {type: string, example: 'Code de l''unité d''inspection', description: 'Le code de l''unité d''inspection'}, institutionId: {type: number, example: '1', description: 'L''ID de l''institution à laquelle l''unité d''inspection appartient'}}, required: [nom, code, institutionId]}, UpdateInspectionUnitDto: {type: object, properties: {nom: {type: string, example: 'Nouveau nom de l''unité d''inspection', description: 'Le nouveau nom de l''unité d''inspection'}, code: {type: string, example: 'Nouveau code de l''unité d''inspection', description: 'Le nouveau code de l''unité d''inspection'}, institutionId: {type: number, example: '2', description: 'Le nouvel ID de l''institution à laquelle l''unité d''inspection appartient'}}, required: [nom, code, institutionId]}, AddEvaluationPointDto: {type: object, properties: {description: {type: string, description: 'La description de l''évaluation', example: 'Vérifier si la pièce est bien fixée'}, type: {type: string, description: 'Le type d''inspection pour lequel cette évaluation est destinée', enum: [interne, externe], example: interne}}, required: [description, type]}, UpdateEvaluationPointDto: {type: object, properties: {description: {type: string, description: 'La description de l''évaluation point à mettre à jour', example: 'Nouvelle description de l''évaluation point'}, type: {type: string, description: 'Le type de l''inspection associé à l''évaluation point', example: externe}}, required: [description, type]}, CreateBlocDto: {type: object, properties: {code: {type: string, example: B01, description: 'Code du bloc'}, nom: {type: string, example: 'Bloc A', description: 'Nom du bloc'}, etage: {type: number, example: 1, description: 'Numéro d''étage du bloc', minimum: 0}, inspectionUnitId: {type: number, example: 1, description: 'Identifiant de l''unité d''inspection associée au bloc'}}, required: [code, nom, etage, inspectionUnitId]}, UpdateBlocDto: {type: object, properties: {code: {type: string, example: B01, description: 'Le code du bloc. Doit être une chaîne de caractères.'}, nom: {type: string, example: 'Bloc A', description: 'Le nom du bloc. Doit être une chaîne de caractères.'}, etage: {type: number, example: 1, description: 'L''étage du bloc. Doit être un nombre entier supérieur ou égal à zéro.', minimum: 0}, inspectionUnitId: {type: number, example: 1, description: 'L''identifiant de l''unité d''inspection du bloc. Doit être un nombre entier.'}}}, CreateInstitutionDto: {type: object, properties: {nom: {type: string, description: 'Le nom de l''institution', example: 'Université de Paris'}, adresse: {type: string, description: 'L''adresse de l''institution', example: '5 Rue de l''Université, 75007 Paris, France'}, nature: {type: string, description: 'La nature de l''institution', example: 'hôpital '}, zoneId: {type: number, example: '1', description: 'L''ID de la zone  à laquelle l''institution appartient'}}, required: [nom, adresse, nature, zoneId]}, UpdateInstitutionDto: {type: object, properties: {nom: {type: string, description: 'Nom de l''institution', example: 'Université de Paris'}, adresse: {type: string, description: 'Adresse de l''institution', example: '5 Rue Thomas Mann, 75013 Paris'}, nature: {type: string, description: 'Nature de l''institution', example: hôpital}}}, CreateZoneDto: {type: object, properties: {nom: {type: string, description: 'Le nom de la zone géographique', example: sfax}}, required: [nom]}, UpdateZoneDto: {type: object, properties: {nom: {type: string, description: 'Nom de la zone', example: sfax}}}}
